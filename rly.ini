;不要随意改变关键字,否则会导致出错
;ACL4SSR 在线规则配置 - 极致性能版（优化版 v2）
;无节点数量限制 + 精准测速 + 移动宽带优化 + AWS 东京线路

;================= 规则部分 =================

; 基础直连/解锁
ruleset=全球直连,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/LocalAreaNetwork.list
ruleset=全球直连,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/UnBan.list

; 广告 / 垃圾规则
ruleset=广告拦截,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/BanAD.list
ruleset=应用净化,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/BanProgramAD.list

; 香港流媒体（myTVsuper）
ruleset=香港流媒体,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/HWTV.list
ruleset=香港流媒体,[]DOMAIN-SUFFIX,mytvsuper.com
ruleset=香港流媒体,[]DOMAIN-SUFFIX,tvb.com
ruleset=香港流媒体,[]DOMAIN-SUFFIX,tvbanywhere.com
ruleset=香港流媒体,[]DOMAIN-SUFFIX,tvbusa.com
ruleset=香港流媒体,[]DOMAIN-SUFFIX,bigbigchannel.com.hk
ruleset=香港流媒体,[]DOMAIN-SUFFIX,encoretvb.com
ruleset=香港流媒体,[]DOMAIN-KEYWORD,mytvsuper
ruleset=香港流媒体,[]DOMAIN-KEYWORD,tvb

; YouTube
ruleset=油管视频,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/YouTube.list

; Telegram
ruleset=电报消息,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Telegram.list

; Netflix
ruleset=奈飞视频,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Netflix.list

; TikTok
ruleset=TikTok,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/TikTok.list

; ChatGPT / AI
ruleset=ChatGPT,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/OpenAI.list
ruleset=ChatGPT,[]DOMAIN-SUFFIX,anthropic.com
ruleset=ChatGPT,[]DOMAIN-SUFFIX,claude.ai
ruleset=ChatGPT,[]DOMAIN-KEYWORD,claude

; 苹果服务
ruleset=苹果服务,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Apple.list

; 其他翻墙网站 / GFW 列表
ruleset=节点选择,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ProxyGFWlist.list

; 大陆直连相关
ruleset=全球直连,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaDomain.list
ruleset=全球直连,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaCompanyIp.list
ruleset=全球直连,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Download.list

; 大陆 IP 直连
ruleset=全球直连,[]GEOIP,CN

; 兜底:漏网之鱼
ruleset=漏网之鱼,[]FINAL


;================= 策略组部分（极致性能优化版 v2）=================

; 总节点池 - 手动选择
custom_proxy_group=节点选择`select`[]AWS香港负载`[]AWS台湾负载`[]AWS东京负载`[]香港负载`[]澳门负载`[]新加坡负载`[]自动选择`[]故障转移`[]DIRECT`.*

; 自动选择 - 延迟最低（Cloudflare 稳定测速）
custom_proxy_group=自动选择`url-test`.*`https://www.cloudflare.com/cdn-cgi/trace`240,,150

; 故障转移组（Cloudflare 稳定测速）
custom_proxy_group=故障转移`fallback`.*`https://www.cloudflare.com/cdn-cgi/trace`240,,150


; === 极致性能负载均衡组（无节点数量限制 + 优化测速）===

; 说明：
; 1) 下列正则采用 “必须包含 + 排除关键词” 的方式，减少“节点乱窜”
; 2) 排除关键词可按你的节点命名再增删（例如：专线/中转/倍率等）

; AWS 香港 hy2 负载均衡组（Cloudflare 测速，超时 40ms）
custom_proxy_group=AWS香港负载`load-balance`^(?=.*aws香港hy2)(?!.*(香港电视|debee|澳门|澳門|Macao|Macau)).*$`https://www.cloudflare.com/cdn-cgi/trace`240,,140

; AWS 台湾 hy2 负载均衡组（Cloudflare 测速，超时 40ms）
custom_proxy_group=AWS台湾负载`load-balance`^(?=.*aws台湾hy2)(?!.*(香港电视|debee|澳门|澳門|Macao|Macau)).*$`https://www.cloudflare.com/cdn-cgi/trace`240,,140

; AWS 东京 hy2 负载均衡组（Cloudflare 测速，超时 50ms，适配日本线路）
custom_proxy_group=AWS东京负载`load-balance`^(?=.*(aws东京hy2|AWS东京))(?!.*(香港电视|debee|澳门|澳門|Macao|Macau)).*$`https://www.cloudflare.com/cdn-cgi/trace`240,,150

; 香港电视负载均衡组（Cloudflare 测速，超时 60ms，适配电视直播）
custom_proxy_group=香港负载`load-balance`^(?=.*香港电视)(?!.*(debee|澳门|澳門|Macao|Macau)).*$`https://www.cloudflare.com/cdn-cgi/trace`180,,160

; 澳门 debee 负载均衡组（YouTube 专用测速，超时 80ms）
custom_proxy_group=澳门负载`load-balance`^(?=.*(澳门.*debee|澳門.*debee|MO.*debee|Macao.*debee|Macau.*debee|澳门.*hy2|MO.*hy2))(?!.*香港电视).*$`https://www.youtube.com/generate_204`180,,180

; 新加坡负载均衡组（Cloudflare 测速，超时 30ms，Telegram 低延迟）
custom_proxy_group=新加坡负载`load-balance`^(?=.*新加坡)(?!.*(香港电视|澳门.*debee|澳門.*debee|MO.*debee|Macao.*debee|Macau.*debee|debee)).*$`https://www.cloudflare.com/cdn-cgi/trace`120,,130


; === 应用专用策略组（绑定最佳线路）===

; 香港流媒体 - 香港电视专线优先
custom_proxy_group=香港流媒体`select`[]香港负载`[]AWS香港负载`(香港电视|香港-电视|HK.*电视)`[]节点选择`[]自动选择`[]DIRECT`.*

; YouTube - 澳门 debee 专线优先，AWS 东京备用（4K 带宽叠加）
custom_proxy_group=油管视频`select`[]澳门负载`[]AWS东京负载`[]AWS香港负载`[]AWS台湾负载`[]新加坡负载`(澳门.*debee|澳門.*debee|aws东京)`[]节点选择`[]自动选择`[]DIRECT`.*

; Telegram - 新加坡专线优先，AWS 东京备用（低延迟）
custom_proxy_group=电报消息`select`[]新加坡负载`[]AWS东京负载`[]AWS香港负载`(新加坡|aws东京)`[]节点选择`[]自动选择`[]DIRECT`.*

; Netflix - AWS 东京优先（日本区 Netflix）
custom_proxy_group=奈飞视频`select`[]AWS东京负载`[]AWS香港负载`[]AWS台湾负载`[]节点选择`[]自动选择`[]故障转移`(NF|奈飞|解锁|Netflix|NETFLIX|Media|流媒体|aws东京)`.*

; TikTok - 新加坡优先，AWS 东京备用
custom_proxy_group=TikTok`select`[]新加坡负载`[]AWS东京负载`[]AWS香港负载`[]节点选择`[]自动选择`[]故障转移`.*

; ChatGPT - AWS 香港优先，AWS 东京备用
custom_proxy_group=ChatGPT`select`[]AWS香港负载`[]AWS东京负载`[]新加坡负载`[]节点选择`[]自动选择`[]故障转移`.*

; 苹果服务 - 直连优先
custom_proxy_group=苹果服务`select`[]DIRECT`[]节点选择`[]自动选择`.*

; 广告拦截 / 应用净化
custom_proxy_group=广告拦截`select`[]REJECT`[]DIRECT
custom_proxy_group=应用净化`select`[]REJECT`[]DIRECT

; 全球直连
custom_proxy_group=全球直连`select`[]DIRECT`[]节点选择

; 漏网之鱼 - 你的注释写 DIRECT 优先，但原顺序是“节点选择”在前
; 我这里不擅自改顺序（避免你依赖原行为），仅保持不动
custom_proxy_group=漏网之鱼`select`[]节点选择`[]DIRECT`[]澳门负载`[]AWS东京负载`[]自动选择`[]故障转移`.*


;================= 规则生成器设置 =================

enable_rule_generator=true
overwrite_original_rules=true


