# Clash é…ç½®æ–‡ä»¶
# é€‚ç”¨äº Clash for Windows / Clash Verge / Clash Meta

# -------------------- åŸºç¡€è®¾ç½® --------------------
port: 7890
socks-port: 7891
allow-lan: true
mode: Rule
log-level: info
external-controller: 0.0.0.0:9090
secret: ""

# -------------------- DNS è®¾ç½® --------------------
dns:
  enable: true
  ipv6: true
  listen: 0.0.0.0:53
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter:
    - "*.lan"
    - "*.local"
    - localhost.ptlogin2.qq.com
    - "+.srv.nintendo.net"
    - "+.stun.playstation.net"
    - "+.msftconnecttest.com"
    - "+.msftncsi.com"
    - "+.xboxlive.com"
    - "msftconnecttest.com"
    - "xbox.*.microsoft.com"
    - "*.battlenet.com.cn"
    - "*.battlenet.com"
    - "*.blzstatic.cn"
    - "*.battle.net"
  nameserver:
    - 119.29.29.29
    - 223.5.5.5
    - https://doh.pub/dns-query
    - https://dns.alidns.com/dns-query
  fallback:
    - https://1.1.1.1/dns-query
    - https://dns.google/dns-query
    - https://cloudflare-dns.com/dns-query
  fallback-filter:
    geoip: true
    geoip-code: CN
    ipcidr:
      - 240.0.0.0/4

# -------------------- ä»£ç†èŠ‚ç‚¹ï¼ˆç”±è®¢é˜…è‡ªåŠ¨å¡«å……ï¼‰--------------------
proxies:

# -------------------- ç­–ç•¥ç»„ --------------------
proxy-groups:
  # ä¸»é€‰æ‹©å™¨
  - name: ğŸš€ èŠ‚ç‚¹é€‰æ‹©
    type: select
    proxies:
      - â™»ï¸ è‡ªåŠ¨é€‰æ‹©
      - ğŸ”¯ æ•…éšœè½¬ç§»
      - ğŸ”® è´Ÿè½½å‡è¡¡
      - DIRECT

  # è‡ªåŠ¨é€‰æ‹©æœ€å¿«èŠ‚ç‚¹
  - name: â™»ï¸ è‡ªåŠ¨é€‰æ‹©
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    tolerance: 50
    use:
      - æ‰€æœ‰èŠ‚ç‚¹

  # æ•…éšœè½¬ç§»
  - name: ğŸ”¯ æ•…éšœè½¬ç§»
    type: fallback
    url: http://www.gstatic.com/generate_204
    interval: 300
    use:
      - æ‰€æœ‰èŠ‚ç‚¹

  # è´Ÿè½½å‡è¡¡
  - name: ğŸ”® è´Ÿè½½å‡è¡¡
    type: load-balance
    strategy: consistent-hashing
    url: http://www.gstatic.com/generate_204
    interval: 300
    use:
      - æ‰€æœ‰èŠ‚ç‚¹

  # è‹¹æœæœåŠ¡
  - name: ğŸ è‹¹æœæœåŠ¡
    type: select
    proxies:
      - DIRECT
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©

  # æ²¹ç®¡è§†é¢‘
  - name: ğŸ“¹ æ²¹ç®¡è§†é¢‘
    type: select
    proxies:
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
      - â™»ï¸ è‡ªåŠ¨é€‰æ‹©
      - DIRECT

  # å¥ˆé£è§†é¢‘
  - name: ğŸ¥ å¥ˆé£è§†é¢‘
    type: select
    proxies:
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
      - â™»ï¸ è‡ªåŠ¨é€‰æ‹©
      - DIRECT

  # TikTok
  - name: ğŸµ TikTok
    type: select
    proxies:
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
      - â™»ï¸ è‡ªåŠ¨é€‰æ‹©

  # ChatGPT
  - name: ğŸ¤– ChatGPT
    type: select
    proxies:
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
      - â™»ï¸ è‡ªåŠ¨é€‰æ‹©

  # ç”µæŠ¥
  - name: ğŸ“² ç”µæŠ¥
    type: select
    proxies:
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
      - â™»ï¸ è‡ªåŠ¨é€‰æ‹©

  # å¹¿å‘Šæ‹¦æˆª
  - name: ğŸ›‘ å¹¿å‘Šæ‹¦æˆª
    type: select
    proxies:
      - REJECT
      - DIRECT

  # åº”ç”¨å‡€åŒ–
  - name: ğŸƒ åº”ç”¨å‡€åŒ–
    type: select
    proxies:
      - REJECT
      - DIRECT

  # å…¨çƒç›´è¿
  - name: ğŸ¯ å…¨çƒç›´è¿
    type: select
    proxies:
      - DIRECT
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©

  # æ¼ç½‘ä¹‹é±¼
  - name: ğŸŸ æ¼ç½‘ä¹‹é±¼
    type: select
    proxies:
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
      - DIRECT

# -------------------- è§„åˆ™æä¾›è€… --------------------
rule-providers:
  # å±€åŸŸç½‘
  LocalAreaNetwork:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/LocalAreaNetwork.list
    path: ./ruleset/LocalAreaNetwork.yaml
    interval: 86400

  # ä¸­å›½åŸŸå
  ChinaDomain:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaDomain.list
    path: ./ruleset/ChinaDomain.yaml
    interval: 86400

  # ä¸­å›½IP
  ChinaIp:
    type: http
    behavior: ipcidr
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaIp.list
    path: ./ruleset/ChinaIp.yaml
    interval: 86400

  # è…¾è®¯
  Tencent:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Tencent.list
    path: ./ruleset/Tencent.yaml
    interval: 86400

  # å¾®ä¿¡
  WeChat:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/WeChat.list
    path: ./ruleset/WeChat.yaml
    interval: 86400

  # Apple
  Apple:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Apple.list
    path: ./ruleset/Apple.yaml
    interval: 86400

  # YouTube
  YouTube:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/YouTube.list
    path: ./ruleset/YouTube.yaml
    interval: 86400

  # Netflix
  Netflix:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Netflix.list
    path: ./ruleset/Netflix.yaml
    interval: 86400

  # å¹¿å‘Šæ‹¦æˆª
  BanAD:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/BanAD.list
    path: ./ruleset/BanAD.yaml
    interval: 86400

  # åº”ç”¨å‡€åŒ–
  BanProgramAD:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/BanProgramAD.list
    path: ./ruleset/BanProgramAD.yaml
    interval: 86400

# -------------------- åˆ†æµè§„åˆ™ --------------------
rules:
  # å±€åŸŸç½‘ç›´è¿
  - RULE-SET,LocalAreaNetwork,ğŸ¯ å…¨çƒç›´è¿

  # å¹¿å‘Šæ‹¦æˆª
  - RULE-SET,BanAD,ğŸ›‘ å¹¿å‘Šæ‹¦æˆª
  - RULE-SET,BanProgramAD,ğŸƒ åº”ç”¨å‡€åŒ–

  # æŠ–éŸ³ç›´æ’­è¡¥å……è§„åˆ™
  - DOMAIN-SUFFIX,douyinliving.com,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN-SUFFIX,douyinflive.com,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN-SUFFIX,douyincdn.com,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN-SUFFIX,douyincdntos.com,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN-SUFFIX,z1cdn.com,ğŸ¯ å…¨çƒç›´è¿

  # TikTok å›½é™…ç‰ˆ
  - DOMAIN-SUFFIX,tiktokv.com,ğŸµ TikTok
  - DOMAIN-SUFFIX,tiktokcdn.com,ğŸµ TikTok
  - DOMAIN-SUFFIX,tiktok.com,ğŸµ TikTok
  - DOMAIN-SUFFIX,byteoversea.com,ğŸµ TikTok
  - DOMAIN-SUFFIX,ibytedtos.com,ğŸµ TikTok

  # ChatGPT
  - DOMAIN-SUFFIX,openai.com,ğŸ¤– ChatGPT
  - DOMAIN-SUFFIX,ai.com,ğŸ¤– ChatGPT
  - DOMAIN-KEYWORD,openai,ğŸ¤– ChatGPT

  # Telegram
  - DOMAIN-SUFFIX,t.me,ğŸ“² ç”µæŠ¥
  - DOMAIN-SUFFIX,telegram.me,ğŸ“² ç”µæŠ¥
  - DOMAIN-SUFFIX,tg.dev,ğŸ“² ç”µæŠ¥
  - DOMAIN-SUFFIX,telegra.ph,ğŸ“² ç”µæŠ¥
  - DOMAIN-SUFFIX,telegram.org,ğŸ“² ç”µæŠ¥
  - IP-CIDR,91.108.0.0/16,ğŸ“² ç”µæŠ¥,no-resolve
  - IP-CIDR,149.154.160.0/20,ğŸ“² ç”µæŠ¥,no-resolve
  - IP-CIDR6,2001:b28:f23d::/48,ğŸ“² ç”µæŠ¥,no-resolve
  - IP-CIDR6,2001:b28:f23f::/48,ğŸ“² ç”µæŠ¥,no-resolve

  # YouTube
  - RULE-SET,YouTube,ğŸ“¹ æ²¹ç®¡è§†é¢‘

  # Netflix
  - RULE-SET,Netflix,ğŸ¥ å¥ˆé£è§†é¢‘

  # Apple
  - RULE-SET,Apple,ğŸ è‹¹æœæœåŠ¡

  # ä¸­å›½ç›´è¿è§„åˆ™
  - RULE-SET,Tencent,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,WeChat,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,ChinaDomain,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,ChinaIp,ğŸ¯ å…¨çƒç›´è¿

  # GeoIP ä¸­å›½ç›´è¿
  - GEOIP,CN,ğŸ¯ å…¨çƒç›´è¿

  # æœ€ç»ˆè§„åˆ™
  - MATCH,ğŸŸ æ¼ç½‘ä¹‹é±¼
